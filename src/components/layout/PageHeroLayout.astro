---
import SiteLayout from "./SiteLayout.astro";
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

type Props = {
  title: string;
  description?: string;
  pubDate?: Date;
  heroImage?: ImageMetadata; // pass URL string, e.g. imported asset resolves to string
  heroAlt?: string;
};

const { title, description, pubDate, heroImage, heroAlt = "" } = Astro.props;

const dateText =
  pubDate &&
  pubDate.toLocaleDateString("en-US", { year: "numeric", month: "short", day: "2-digit" });
---
<SiteLayout title={title} description={description}>
  <article class="prose">
    {heroImage && (
      <Image
        src={heroImage}
        alt={heroAlt}
        widths={[800, 1200]}
        sizes="(min-width: 900px) 800px, 100vw"
        loading="lazy"
      />
    )}
    <h1>{title}</h1>
    {dateText && <p class="meta">{dateText}</p>}
    <slot />
  </article>
</SiteLayout>