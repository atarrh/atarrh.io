---
import SiteLayout from "./SiteLayout.astro";
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

type Props = {
  title: string;
  description?: string;
  pubDate?: Date;

  portraitImage?: ImageMetadata;
  portraitAlt?: string;
};

const { title, description, pubDate, portraitImage, portraitAlt = "" } = Astro.props;

const dateText =
  pubDate &&
  pubDate.toLocaleDateString("en-US", { year: "numeric", month: "short", day: "2-digit" });
---
<SiteLayout title={title} description={description}>
  <article class="prose">
    {portraitImage && (
      <figure class="about__photo">
        <Image
          src={portraitImage}
          alt={portraitAlt ?? "Portrait"}
          widths={[180, 240, 320, 360, 720]}
          sizes="(min-width: 600px) 360px, 80vw"
          loading="lazy"
        />
      </figure>
    )}
    <h1>{title}</h1>
    {dateText && <p class="meta">Published: {dateText}</p>}

    <section class="about">
      <div class="about__text">
        <slot />
      </div>
    </section>
  </article>
</SiteLayout>