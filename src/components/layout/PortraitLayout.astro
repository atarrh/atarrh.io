---
import SiteLayout from "./SiteLayout.astro";
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

type Props = {
  title: string;
  description?: string;
  pubDate?: Date;

  portraitImage?: ImageMetadata;
  portraitAlt?: string;
};

const { title, description, portraitImage, portraitAlt = "" } = Astro.props;

---
<SiteLayout title={title} description={description}>
  <article class="prose">
    {portraitImage && (
      <figure class="about__photo">
        <Image
          src={portraitImage}
          alt={portraitAlt ?? "Portrait"}
          widths={[180, 240, 320, 360, 720]}
          sizes="(min-width: 600px) 360px, 80vw"
          loading="lazy"
        />
      </figure>
    )}
    <h1>{title}</h1>

    <section class="about">
      <div class="about__text">
        <slot />
      </div>
    </section>
  </article>
</SiteLayout>

<style>
  /* space between image and text */
  .about__photo {
    margin: 0 0 1rem 1.5rem;   
  }
  
  @media (min-width: 600px) {
    .about__photo {
      float: right;
      width: 360px;
    }
  }
  
  /* Mobile: no float, constrained with max-width */
  @media (max-width: 599px) {
    .about__photo {
      float: none;
      width: 100%;
      max-width: 360px;
      margin: 1rem auto;
    }
  }
  
  .about__photo :global(img),
  .about__photo :global(picture) {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 16px;
  }
</style>